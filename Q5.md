#### KRISH SINGH
#### Section: A1
#### Roll No: 03

## Q.5: Program for Flattening a Linked List

We are given a linked list where each node has a next pointer (to the right) and a bottom pointer (downwards), and "bottom" list is sorted. We have to flatten the entire list into a single sorted list

## Complexity:

Time Complexity: O(N * K)
Where N is the average number of nodes in a vertical list and K is the number of vertical lists. We merge each list one by one

Space Complexity: O(K)
This is due to the recursion which will go as deep as the number of lists

## Algorithm:

 Flatten a Linked List (head):
The first list will be merged with the flattened version of the remaining lists
If there is only one list, then it is already flattened so return it
Recursively flatten the list on the right side first
Now merge two sorted lists:
head list and the already flattened list
Continue merging by comparing the smallest element using the bottom pointer
Repeat until all lists are merged into one sorted list

## Example:
4 → 11 → 15 → 23
|     |     |     |
6     14    24    30
|           |     |
9           28    35
|                 |
12                40


Output:

4 → 6 → 9 → 11 → 12 → 14 → 15 → 23 → 24 → 28 → 30 → 35 → 40

## JAVA CODE:- 

import java.util.*;

class Node1 {
    int data;
    Node1 next;
    Node1 down;

    Node1(int data) {
        this.data = data;
        this.next = null;
        this.down = null;
    }
}

public class Flattening {

    public static Node1 merge(Node1 a, Node1 b) {
        if (a == null){
            return b;
        }
        if (b == null){
            return a;
        }
        Node1 result;

        if (a.data < b.data) {
            result = a;
            result.down = merge(a.down, b);
        } else {
            result = b;
            result.down = merge(a, b.down);
        }

        return result;
    }

    public static Node1 flatten(Node1 root) {
        if (root == null || root.next == null) {
            return root;
        }

        root.next = flatten(root.next);

        root = merge(root, root.next);

        return root;
    }

    public static void printList(Node1 root) {
        while (root != null) {
            System.out.print(root.data + " ");
            root = root.down;
        }
        System.out.println();
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.print("Enter number of main nodes: ");
        int n = sc.nextInt();

        Node1[] arr = new Node1[n];

        for (int i = 0; i < n; i++) {
            System.out.print("Enter data for main node " + (i + 1) + ": ");
            arr[i] = new Node1(sc.nextInt());

            System.out.print("Enter number of nodes in sublist of node " + (i + 1) + ": ");
            int m = sc.nextInt();

            Node1 temp = arr[i];
            for (int j = 0; j < m; j++) {
                System.out.print("Enter data for sub node " + (j + 1) + ": ");
                temp.down = new Node1(sc.nextInt());
                temp = temp.down;
            }
        }

        for (int i = 0; i < n - 1; i++) {
            arr[i].next = arr[i + 1];
        }

        Node1 root = arr[0];

        System.out.println("Flattened linked list:");
        Node1 flat = flatten(root);
        printList(flat);

        sc.close();
    }
}


## OUTPUT IMAGE:-

![alt text](image-3.png)